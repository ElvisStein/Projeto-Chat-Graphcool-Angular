(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"5zjZ":function(l,n,t){"use strict";t.r(n);var e=t("8Y7J");class a{}var i=t("t68o"),r=t("xYTU"),u=t("D6GP"),s=t("pMnS"),o=t("rWV4"),c=t("SVse"),b=t("POq0"),d=t("IP0z"),m=t("Xd0L"),h=t("cUpR"),p=t("zMNK"),g=t("/HVE"),f=t("5GAg"),v=t("omvX"),D=t("hOhj"),y=e.qb({encapsulation:2,styles:[".mat-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mat-tab-header-pagination{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:transparent;touch-action:none}.mat-tab-header-pagination-controls-enabled .mat-tab-header-pagination{display:flex}.mat-tab-header-pagination-before,.mat-tab-header-rtl .mat-tab-header-pagination-after{padding-left:4px}.mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-rtl .mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-tab-header-pagination-after,.mat-tab-header-rtl .mat-tab-header-pagination-before{padding-right:4px}.mat-tab-header-pagination-after .mat-tab-header-pagination-chevron,.mat-tab-header-rtl .mat-tab-header-pagination-before .mat-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;content:'';height:8px;width:8px}.mat-tab-header-pagination-disabled{box-shadow:none;cursor:default}.mat-tab-list{flex-grow:1;position:relative;transition:transform .5s cubic-bezier(.35,0,.25,1)}.mat-tab-links{display:flex}[mat-align-tabs=center] .mat-tab-links{justify-content:center}[mat-align-tabs=end] .mat-tab-links{justify-content:flex-end}.mat-ink-bar{position:absolute;bottom:0;height:2px;transition:.5s cubic-bezier(.35,0,.25,1)}._mat-animation-noopable.mat-ink-bar{transition:none;animation:none}.mat-tab-group-inverted-header .mat-ink-bar{bottom:auto;top:0}@media (-ms-high-contrast:active){.mat-ink-bar{outline:solid 2px;height:0}}.mat-tab-link-container{display:flex;flex-grow:1;overflow:hidden;z-index:1}.mat-tab-link{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;vertical-align:top;text-decoration:none;position:relative;overflow:hidden;-webkit-tap-highlight-color:transparent}.mat-tab-link:focus{outline:0}.mat-tab-link:focus:not(.mat-tab-disabled){opacity:1}@media (-ms-high-contrast:active){.mat-tab-link:focus{outline:dotted 2px}}.mat-tab-link.mat-tab-disabled{cursor:default}@media (-ms-high-contrast:active){.mat-tab-link.mat-tab-disabled{opacity:.5}}.mat-tab-link .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}@media (-ms-high-contrast:active){.mat-tab-link{opacity:1}}[mat-stretch-tabs] .mat-tab-link{flex-basis:0;flex-grow:1}.mat-tab-link.mat-tab-disabled{pointer-events:none}@media (max-width:599px){.mat-tab-link{min-width:72px}}"],data:{}});function k(l){return e.Nb(2,[e.Jb(402653184,1,{_inkBar:0}),e.Jb(402653184,2,{_tabListContainer:0}),e.Jb(402653184,3,{_tabList:0}),e.Jb(671088640,4,{_nextPaginator:0}),e.Jb(671088640,5,{_previousPaginator:0}),(l()(),e.sb(5,0,[[5,0],["previousPaginator",1]],null,2,"div",[["aria-hidden","true"],["class","mat-tab-header-pagination mat-tab-header-pagination-before mat-elevation-z4 mat-ripple"],["mat-ripple",""]],[[2,"mat-tab-header-pagination-disabled",null],[2,"mat-ripple-unbounded",null]],[[null,"click"],[null,"mousedown"],[null,"touchend"]],function(l,n,t){var e=!0,a=l.component;return"click"===n&&(e=!1!==a._handlePaginatorClick("before")&&e),"mousedown"===n&&(e=!1!==a._handlePaginatorPress("before")&&e),"touchend"===n&&(e=!1!==a._stopInterval()&&e),e},null,null)),e.rb(6,212992,null,0,m.u,[e.k,e.y,g.a,[2,m.k],[2,v.a]],{disabled:[0,"disabled"]},null),(l()(),e.sb(7,0,null,null,0,"div",[["class","mat-tab-header-pagination-chevron"]],null,null,null,null,null)),(l()(),e.sb(8,0,[[2,0],["tabListContainer",1]],null,6,"div",[["class","mat-tab-link-container"]],null,[[null,"keydown"]],function(l,n,t){var e=!0;return"keydown"===n&&(e=!1!==l.component._handleKeydown(t)&&e),e},null,null)),(l()(),e.sb(9,0,[[3,0],["tabList",1]],null,5,"div",[["class","mat-tab-list"]],null,[[null,"cdkObserveContent"]],function(l,n,t){var e=!0;return"cdkObserveContent"===n&&(e=!1!==l.component._onContentChanges()&&e),e},null,null)),e.rb(10,1196032,null,0,b.a,[b.b,e.k,e.y],null,{event:"cdkObserveContent"}),(l()(),e.sb(11,0,null,null,1,"div",[["class","mat-tab-links"]],null,null,null,null,null)),e.Cb(null,0),(l()(),e.sb(13,0,null,null,1,"mat-ink-bar",[["class","mat-ink-bar"]],[[2,"_mat-animation-noopable",null]],null,null,null,null)),e.rb(14,16384,[[1,4]],0,o.b,[e.k,e.y,o.l,[2,v.a]],null,null),(l()(),e.sb(15,0,[[4,0],["nextPaginator",1]],null,2,"div",[["aria-hidden","true"],["class","mat-tab-header-pagination mat-tab-header-pagination-after mat-elevation-z4 mat-ripple"],["mat-ripple",""]],[[2,"mat-tab-header-pagination-disabled",null],[2,"mat-ripple-unbounded",null]],[[null,"mousedown"],[null,"click"],[null,"touchend"]],function(l,n,t){var e=!0,a=l.component;return"mousedown"===n&&(e=!1!==a._handlePaginatorPress("after")&&e),"click"===n&&(e=!1!==a._handlePaginatorClick("after")&&e),"touchend"===n&&(e=!1!==a._stopInterval()&&e),e},null,null)),e.rb(16,212992,null,0,m.u,[e.k,e.y,g.a,[2,m.k],[2,v.a]],{disabled:[0,"disabled"]},null),(l()(),e.sb(17,0,null,null,0,"div",[["class","mat-tab-header-pagination-chevron"]],null,null,null,null,null))],function(l,n){var t=n.component;l(n,6,0,t._disableScrollBefore||t.disableRipple),l(n,16,0,t._disableScrollAfter||t.disableRipple)},function(l,n){var t=n.component;l(n,5,0,t._disableScrollBefore,e.Db(n,6).unbounded),l(n,13,0,"NoopAnimations"===e.Db(n,14)._animationMode),l(n,15,0,t._disableScrollAfter,e.Db(n,16).unbounded)})}var x=t("iInd");class C{constructor(l,n,t){this.authService=l,this.chatService=n,this.userService=t}ngOnInit(){this.chatService.startChatMonitoring(),this.userService.startUsersMonitoring(this.authService.authUser.id)}}var I=t("7dP1"),_=t("lJxs");class w{readAndWriteQuery(l){try{const t=l.store.readQuery({query:l.query,variables:l.variable});switch(l.arrayOperation){case"push":case"unshift":t[l.queryName]=[...t[l.queryName]],t[l.queryName][l.arrayOperation](l.newRecord);break;case"singleRecord":t[l.queryName]=[l.newRecord]}l.store.writeQuery({query:l.query,variables:l.variable,data:t})}catch(n){console.log(`Query ${l.queryName} n\xe3o foi encontrado no cache!`)}}}var M=t("lTCR"),S=t.n(M),O=t("h1BL");const L=S.a`
  fragment ChatFragment on Chat {
    id
    title
    createdAt
    isGroup
    users(
      first: 1,
      filter: {
        id_not: $loggedUserId
      }
    ) {
      id
      name
      email
      createdAt
      photo {
        ...FileFragment
      }
    }
  }
  ${O.a}
`,$=S.a`
  fragment ChatMessagesFragment on Chat {
    messages(
      last: 1
    ) {
      id
      createdAt
      text
      sender {
        id
        name
      }
    }
  }
`,B=S.a`
  query UserChatsQuery($loggedUserId: ID!) {
    allChats(
      filter: {
        users_some: {
          id: $loggedUserId
        }
      }
    ) {
      ...ChatFragment
      ...ChatMessagesFragment
    }
  }
  ${L}
  ${$}
`,F=S.a`
  query ChatByIdOrByUsersQuery($chatId: ID!, $loggedUserId: ID!, $targetUserId: ID!) {
    Chat(
      id: $chatId
    ) {
      ...ChatFragment
    }
    allChats(
      filter: {
        AND: [
          { users_some: { id: $loggedUserId } },
          { users_some: { id: $targetUserId } }
        ],
        isGroup: false
      }
    ) {
      ...ChatFragment
    }
  }
  ${L}
`,U=S.a`
  mutation CreatePrivateChatMutation($loggedUserId: ID!, $targetUserId: ID!) {
    createChat(
      usersIds: [
        $loggedUserId,
        $targetUserId
      ]
    ) {
      ...ChatFragment
      ...ChatMessagesFragment
    }
  }
  ${L}
  ${$}
`,N=S.a`
  mutation CreateGroupMutation($title: String!, $usersIds: [ID!]!, $loggedUserId: ID!, $photoId: ID) {
    createChat(
      title: $title,
      usersIds: $usersIds,
      isGroup: true
      photoId: $photoId
    ) {
      ...ChatFragment
      ...ChatMessagesFragment
    }
  }
  ${L}
  ${$}
`,A=S.a`
  subscription UserChatsSubscription($loggedUserId: ID!) {
    Chat(
      filter: {
        mutation_in: [ CREATED, UPDATED ],
        node: {
          users_some: {
            id: $loggedUserId
          }
        }
      }
    ) {
      mutation
      node {
        ...ChatFragment
        ...ChatMessagesFragment
      }
    }
  }
  ${L}
  ${$}
`,P=S.a`
  fragment MessageFragment on Message {
    id
    text
    createdAt
    sender {
      id
      name
      email
      createdAt
      photo {
        ...FileFragment
      }
    }
    chat {
      id
    }
  }
  ${O.a}
`,q=S.a`
  query GetChatMessagesQuery($chatId: ID!) {
    allMessages(
      filter: {
        chat: {
          id: $chatId
        }
      },
      orderBy: createdAt_ASC
    ) {
      ...MessageFragment
    }
  }
  ${P}
`,j=S.a`
  mutation CreateMessageMutation($text: String!, $chatId: ID!, $senderId: ID!) {
    createMessage(
      text: $text,
      chatId: $chatId,
      senderId: $senderId
    ) {
      ...MessageFragment
    }
  }
  ${P}
`,T=S.a`
  subscription UserMessagesSubscription($loggedUserId: ID!) {
    Message(
      filter: {
        mutation_in: [ CREATED ],
        node: {
          chat: {
            users_some: {
              id: $loggedUserId
            }
          }
        }
      }
    ) {
      mutation
      node {
        ...MessageFragment
      }
    }
  }
  ${P}
`;var J=t("yDaI");class R{constructor(l){Object.keys(l).forEach(n=>this[n]=l[n])}getPhotoURL(){return this.photo&&this.photo.secret?`${J.b.fileDownloadURL}/${this.photo.secret}`:this.isGroup?"assets/images/group-no-photo.png":this.users[0].getPhotoURL()||"assets/images/user-no-photo.png"}}var E=t("PQuL"),Q=t("B9zn"),G=t("f4AX");let z=(()=>{class l extends w{constructor(l,n,t,e){super(),this.apollo=l,this.authService=n,this.router=t,this.userService=e,this.subscriptions=[]}startChatMonitoring(){this.chats$||(this.chats$=this.getUserChats(),this.subscriptions.push(this.chats$.subscribe()),this.subscriptions.push(this.router.events.subscribe(l=>{l instanceof x.d&&!this.router.url.includes("chat")&&(this.stopChatsMonitoring(),this.userService.stopUsersMonitoring())})))}stopChatsMonitoring(){this.subscriptions.forEach(l=>l.unsubscribe()),this.subscriptions=[],this.chats$=null}getUserChats(){return this.queryRef=this.apollo.watchQuery({query:B,variables:{loggedUserId:this.authService.authUser.id},fetchPolicy:"network-only"}),this.queryRef.subscribeToMore({document:A,variables:{loggedUserId:this.authService.authUser.id},updateQuery:(l,{subscriptionData:n})=>{const t=n.data.Chat.node;return l.allChats.every(l=>l.id!==t.id)?Object.assign({},l,{allChats:[t,...l.allChats]}):l}}),this.queryRef.subscribeToMore({document:T,variables:{loggedUserId:this.authService.authUser.id},updateQuery:(l,{subscriptionData:n})=>{const t=n.data.Message.node;try{if(t.sender.id!==this.authService.authUser.id){const l=this.apollo.getClient(),n={chatId:t.chat.id},e=l.readQuery({query:q,variables:n});e.allMessages=[...e.allMessages,t],l.writeQuery({query:q,variables:n,data:e})}}catch(a){console.log("allMessagesQuery not found!")}const e=l.allChats?l.allChats.findIndex(l=>l.id===t.chat.id):-1;if(e>-1){const n=[...l.allChats],a=Object.assign({},n[e]);return a.messages=[t],n[e]=a,Object.assign({},l,{allChats:n})}return l}}),this.queryRef.valueChanges.pipe(Object(_.a)(l=>l.data.allChats),Object(_.a)(l=>l.slice().sort((l,n)=>{const t=l.messages.length>0?new Date(l.messages[0].createdAt).getTime():new Date(l.createdAt).getTime();return(n.messages.length>0?new Date(n.messages[0].createdAt).getTime():new Date(n.createdAt).getTime())-t})),Object(_.a)(l=>l.map(l=>{const n=new R(l);return n.users=n.users.map(l=>new E.a(l)),n})))}getChatByIdByUsers(l){return this.apollo.query({query:F,variables:{chatId:l,loggedUserId:this.authService.authUser.id,targetUserId:l}}).pipe(Object(_.a)(l=>l.data.Chat?l.data.Chat:l.data.allChats[0]))}createPrivateChat(l){return this.apollo.mutate({mutation:U,variables:{loggedUserId:this.authService.authUser.id,targetUserId:l},update:(n,{data:{createChat:t}})=>{this.readAndWriteQuery({store:n,newRecord:t,query:B,queryName:"allChats",arrayOperation:"unshift",variable:{loggedUserId:this.authService.authUser.id}}),this.readAndWriteQuery({store:n,newRecord:t,query:F,queryName:"allChats",arrayOperation:"singleRecord",variable:{chatId:l,loggedUserId:this.authService.authUser.id,targetUserId:l}})}}).pipe(Object(_.a)(l=>l.data.createChat))}createGroup(l){return l.usersIds.push(this.authService.authUser.id),this.apollo.mutate({mutation:N,variables:Object.assign({},l,{loggedUserId:this.authService.authUser.id}),optimisticResponse:{__typename:"mutation",createChat:{__typename:"Chat",id:"",title:l.title,createdAt:(new Date).toISOString(),isGroup:!0,photo:{__typename:"File",id:"",secret:""},users:[{__typename:"User",id:"",name:"",email:"",createdAt:(new Date).toISOString(),photo:{__typename:"File",id:"",secret:""}}],messages:[]}},update:(l,{data:{createChat:n}})=>{this.readAndWriteQuery({store:l,newRecord:n,query:B,queryName:"allChats",arrayOperation:"unshift",variable:{loggedUserId:this.authService.authUser.id}})}}).pipe(Object(_.a)(l=>l.data.createChat))}}return l.ngInjectableDef=e.Rb({factory:function(){return new l(e.Sb(Q.b),e.Sb(I.a),e.Sb(x.l),e.Sb(G.a))},token:l,providedIn:"root"}),l})();var K=e.qb({encapsulation:2,styles:[],data:{}});function W(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,17,"nav",[["backgroudColor","primary"],["class","mat-tab-nav-bar mat-tab-header"],["mat-tab-nav-bar",""]],[[2,"mat-tab-header-pagination-controls-enabled",null],[2,"mat-tab-header-rtl",null],[2,"mat-primary",null],[2,"mat-accent",null],[2,"mat-warn",null]],null,null,k,y)),e.rb(1,7520256,null,1,o.j,[e.k,[2,d.b],e.y,e.h,D.e,[2,g.a],[2,v.a]],null,null),e.Jb(603979776,1,{_items:1}),(l()(),e.sb(3,0,null,0,7,"a",[["class","mat-tab-link"],["mat-tab-link",""],["routerLink","./"],["routerLinkActive",""]],[[1,"aria-current",0],[1,"aria-disabled",0],[1,"tabIndex",0],[2,"mat-tab-disabled",null],[2,"mat-tab-label-active",null],[1,"target",0],[8,"href",4]],[[null,"click"]],function(l,n,t){var a=!0;return"click"===n&&(a=!1!==e.Db(l,5).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&a),a},null,null)),e.rb(4,147456,[[1,4]],0,o.i,[o.j,e.k,e.y,g.a,[2,m.k],[8,null],f.d,[2,v.a]],{active:[0,"active"]},null),e.rb(5,671744,[[3,4]],0,x.o,[x.l,x.a,c.i],{routerLink:[0,"routerLink"]},null),e.rb(6,1720320,[["chatsRla",4]],2,x.n,[x.l,e.k,e.D,[2,x.m],[2,x.o]],{routerLinkActiveOptions:[0,"routerLinkActiveOptions"],routerLinkActive:[1,"routerLinkActive"]},null),e.Jb(603979776,2,{links:1}),e.Jb(603979776,3,{linksWithHrefs:1}),e.Gb(9,{exact:0}),(l()(),e.Lb(-1,null,[" Conversas "])),(l()(),e.sb(11,0,null,0,6,"a",[["class","mat-tab-link"],["mat-tab-link",""],["routerLink","users"],["routerLinkActive",""]],[[1,"aria-current",0],[1,"aria-disabled",0],[1,"tabIndex",0],[2,"mat-tab-disabled",null],[2,"mat-tab-label-active",null],[1,"target",0],[8,"href",4]],[[null,"click"]],function(l,n,t){var a=!0;return"click"===n&&(a=!1!==e.Db(l,13).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&a),a},null,null)),e.rb(12,147456,[[1,4]],0,o.i,[o.j,e.k,e.y,g.a,[2,m.k],[8,null],f.d,[2,v.a]],{active:[0,"active"]},null),e.rb(13,671744,[[5,4]],0,x.o,[x.l,x.a,c.i],{routerLink:[0,"routerLink"]},null),e.rb(14,1720320,[["usersRla",4]],2,x.n,[x.l,e.k,e.D,[2,x.m],[2,x.o]],{routerLinkActive:[0,"routerLinkActive"]},null),e.Jb(603979776,4,{links:1}),e.Jb(603979776,5,{linksWithHrefs:1}),(l()(),e.Lb(-1,null,[" Usu\xe1rios "])),(l()(),e.sb(18,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),e.rb(19,212992,null,0,x.q,[x.b,e.O,e.j,[8,null],e.h],null,null)],function(l,n){l(n,4,0,e.Db(n,6).isActive),l(n,5,0,"./");var t=l(n,9,0,!0);l(n,6,0,t,""),l(n,12,0,e.Db(n,14).isActive),l(n,13,0,"users"),l(n,14,0,""),l(n,19,0)},function(l,n){l(n,0,0,e.Db(n,1)._showPaginationControls,"rtl"==e.Db(n,1)._getLayoutDirection(),"warn"!==e.Db(n,1).color&&"accent"!==e.Db(n,1).color,"accent"===e.Db(n,1).color,"warn"===e.Db(n,1).color),l(n,3,0,e.Db(n,4).active?"page":null,e.Db(n,4).disabled,e.Db(n,4).tabIndex,e.Db(n,4).disabled,e.Db(n,4).active,e.Db(n,5).target,e.Db(n,5).href),l(n,11,0,e.Db(n,12).active?"page":null,e.Db(n,12).disabled,e.Db(n,12).tabIndex,e.Db(n,12).disabled,e.Db(n,12).active,e.Db(n,13).target,e.Db(n,13).href)})}function V(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,1,"app-chat-tab",[],null,null,null,W,K)),e.rb(1,114688,null,0,C,[I.a,z,G.a],null,null)],function(l,n){l(n,1,0)},null)}var H=e.ob("app-chat-tab",C,V,{},{},[]),X=t("6UMx"),Y=t("Q+lL"),Z=t("NhFT"),ll=t("PT0D"),nl=t("NvT6"),tl=t("W5yJ"),el=t("Mr+X"),al=t("Gi4r");class il{}var rl=e.qb({encapsulation:0,styles:[[".container[_ngcontent-%COMP%]{margin-top:30px;display:flex;align-items:center;flex-direction:column}h3[_ngcontent-%COMP%], mat-icon[_ngcontent-%COMP%]{color:#ccc}mat-icon[_ngcontent-%COMP%]{width:150px;height:150px;font-size:150px}"]],data:{}});function ul(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,5,"div",[["class","container"]],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,el.b,el.a)),e.rb(2,9158656,null,0,al.b,[e.k,al.d,[8,null],[2,al.a],[2,e.l]],null,null),(l()(),e.Lb(3,0,["",""])),(l()(),e.sb(4,0,null,null,1,"h3",[],null,null,null,null,null)),(l()(),e.Lb(5,null,["",""]))],function(l,n){l(n,2,0)},function(l,n){var t=n.component;l(n,1,0,e.Db(n,2).inline,"primary"!==e.Db(n,2).color&&"accent"!==e.Db(n,2).color&&"warn"!==e.Db(n,2).color),l(n,3,0,t.icon),l(n,5,0,t.title)})}class sl{trackByFn(l,n){return n.id}}class ol extends sl{constructor(l){super(),this.userService=l}ngOnInit(){this.users$=this.userService.users$}}var cl=e.qb({encapsulation:0,styles:[[""]],data:{}});function bl(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,17,"a",[["class","mat-list-item"],["mat-list-item",""]],[[2,"mat-list-item-avatar",null],[2,"mat-list-item-with-avatar",null],[1,"target",0],[8,"href",4]],[[null,"click"]],function(l,n,t){var a=!0;return"click"===n&&(a=!1!==e.Db(l,5).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&a),a},X.c,X.a)),e.rb(1,1228800,null,3,Y.d,[e.k,e.h,[2,Y.h],[2,Y.a]],null,null),e.Jb(603979776,1,{_lines:1}),e.Jb(603979776,2,{_avatar:0}),e.Jb(603979776,3,{_icon:0}),e.rb(5,671744,null,0,x.o,[x.l,x.a,c.i],{routerLink:[0,"routerLink"]},null),e.Eb(6,2),(l()(),e.sb(7,0,null,0,3,"app-avatar",[["class","mat-list-avatar"],["matListAvatar",""]],null,null,null,Z.b,Z.a)),e.rb(8,16384,[[2,4]],0,Y.b,[],null,null),e.rb(9,49152,null,0,ll.a,[],{src:[0,"src"],title:[1,"title"],containerStyles:[2,"containerStyles"]},null),e.Gb(10,{width:0,height:1,margin:2}),(l()(),e.sb(11,0,null,1,2,"h3",[["class","mat-line"],["matLine",""]],null,null,null,null,null)),e.rb(12,16384,[[1,4]],0,m.m,[],null,null),(l()(),e.Lb(13,null,["",""])),(l()(),e.sb(14,0,null,1,3,"p",[["class","mat-line"],["matLine",""]],null,null,null,null,null)),e.rb(15,16384,[[1,4]],0,m.m,[],null,null),(l()(),e.Lb(16,null,["Member since ",""])),e.Hb(17,2)],function(l,n){var t=l(n,6,0,"../",n.context.$implicit.id);l(n,5,0,t);var e=n.context.$implicit.getPhotoURL(),a=n.context.$implicit.name,i=l(n,10,0,"40px","40px",0);l(n,9,0,e,a,i)},function(l,n){l(n,0,0,e.Db(n,1)._avatar||e.Db(n,1)._icon,e.Db(n,1)._avatar||e.Db(n,1)._icon,e.Db(n,5).target,e.Db(n,5).href),l(n,13,0,n.context.$implicit.name);var t=e.Mb(n,16,0,l(n,17,0,e.Db(n.parent.parent.parent,0),n.context.$implicit.createdAt,"dd/MM/yyyy"));l(n,16,0,t)})}function dl(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,bl)),e.rb(2,278528,null,0,c.k,[e.O,e.L,e.r],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(l()(),e.hb(0,null,null,0))],function(l,n){l(n,2,0,n.parent.context.ngIf,n.component.trackByFn)},null)}function ml(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,dl)),e.rb(2,16384,null,0,c.l,[e.O,e.L],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(l()(),e.hb(0,null,null,0))],function(l,n){l(n,2,0,n.context.ngIf.length>0,e.Db(n.parent,7))},null)}function hl(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,1,"mat-spinner",[["class","spinner mat-spinner mat-progress-spinner"],["diameter","50"],["mode","indeterminate"],["role","progressbar"],["strokeWidth","3"]],[[2,"_mat-animation-noopable",null],[4,"width","px"],[4,"height","px"]],null,null,nl.b,nl.a)),e.rb(1,114688,null,0,tl.d,[e.k,g.a,[2,c.d],[2,v.a],tl.a],{diameter:[0,"diameter"],strokeWidth:[1,"strokeWidth"]},null)],function(l,n){l(n,1,0,"50","3")},function(l,n){l(n,0,0,e.Db(n,1)._noopAnimations,e.Db(n,1).diameter,e.Db(n,1).diameter)})}function pl(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,1,"app-no-record",[["icon","group"],["title","No registered users."]],null,null,null,ul,rl)),e.rb(1,49152,null,0,il,[],{icon:[0,"icon"],title:[1,"title"]},null)],function(l,n){l(n,1,0,"group","No registered users.")},null)}function gl(l){return e.Nb(0,[e.Fb(0,c.e,[e.t]),(l()(),e.sb(1,0,null,null,4,"mat-nav-list",[["class","mat-nav-list mat-list-base"],["role","navigation"]],null,null,null,X.d,X.b)),e.rb(2,704512,null,0,Y.h,[],null,null),(l()(),e.hb(16777216,null,0,2,null,ml)),e.rb(4,16384,null,0,c.l,[e.O,e.L],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),e.Fb(131072,c.b,[e.h]),(l()(),e.hb(0,[["loadingUsers",2]],null,0,null,hl)),(l()(),e.hb(0,[["noUsers",2]],null,0,null,pl))],function(l,n){var t=n.component;l(n,4,0,e.Mb(n,4,0,e.Db(n,5).transform(t.users$)),e.Db(n,6))},null)}function fl(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,1,"app-chat-users",[],null,null,null,gl,cl)),e.rb(1,114688,null,0,ol,[G.a],null,null)],function(l,n){l(n,1,0)},null)}var vl=e.ob("app-chat-users",ol,fl,{},{},[]),Dl=t("bujt"),yl=t("Fwaw"),kl=t("gavF"),xl=t("QQfA"),Cl=e.qb({encapsulation:2,styles:[".mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px}.mat-menu-panel.ng-animating{pointer-events:none}@media (-ms-high-contrast:active){.mat-menu-panel{outline:solid 1px}}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]{pointer-events:none}@media (-ms-high-contrast:active){.mat-menu-item-highlighted,.mat-menu-item.cdk-keyboard-focused,.mat-menu-item.cdk-program-focused{outline:dotted 1px}}.mat-menu-item-submenu-trigger{padding-right:32px}.mat-menu-item-submenu-trigger::after{width:0;height:0;border-style:solid;border-width:5px 0 5px 5px;border-color:transparent transparent transparent currentColor;content:'';display:inline-block;position:absolute;top:50%;right:16px;transform:translateY(-50%)}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}[dir=rtl] .mat-menu-item-submenu-trigger::after{right:auto;left:16px;transform:rotateY(180deg) translateY(-50%)}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}"],data:{animation:[{type:7,name:"transformMenu",definitions:[{type:0,name:"void",styles:{type:6,styles:{opacity:0,transform:"scale(0.8)"},offset:null},options:void 0},{type:1,expr:"void => enter",animation:{type:3,steps:[{type:11,selector:".mat-menu-content, .mat-mdc-menu-content",animation:{type:4,styles:{type:6,styles:{opacity:1},offset:null},timings:"100ms linear"},options:null},{type:4,styles:{type:6,styles:{transform:"scale(1)"},offset:null},timings:"120ms cubic-bezier(0, 0, 0.2, 1)"}],options:null},options:null},{type:1,expr:"* => void",animation:{type:4,styles:{type:6,styles:{opacity:0},offset:null},timings:"100ms 25ms linear"},options:null}],options:{}},{type:7,name:"fadeInItems",definitions:[{type:0,name:"showing",styles:{type:6,styles:{opacity:1},offset:null},options:void 0},{type:1,expr:"void => *",animation:[{type:6,styles:{opacity:0},offset:null},{type:4,styles:null,timings:"400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"}],options:null}],options:{}}]}});function Il(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,4,"div",[["class","mat-menu-panel"],["role","menu"],["tabindex","-1"]],[[24,"@transformMenu",0]],[[null,"keydown"],[null,"click"],[null,"@transformMenu.start"],[null,"@transformMenu.done"]],function(l,n,t){var e=!0,a=l.component;return"keydown"===n&&(e=!1!==a._handleKeydown(t)&&e),"click"===n&&(e=!1!==a.closed.emit("click")&&e),"@transformMenu.start"===n&&(e=!1!==a._onAnimationStart(t)&&e),"@transformMenu.done"===n&&(e=!1!==a._onAnimationDone(t)&&e),e},null,null)),e.Ib(512,null,c.w,c.x,[e.r,e.s,e.k,e.D]),e.rb(2,278528,null,0,c.j,[c.w],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(l()(),e.sb(3,0,null,null,1,"div",[["class","mat-menu-content"]],null,null,null,null,null)),e.Cb(null,0)],function(l,n){l(n,2,0,"mat-menu-panel",n.component._classList)},function(l,n){l(n,0,0,n.component._panelAnimationState)})}function _l(l){return e.Nb(2,[e.Jb(671088640,1,{templateRef:0}),(l()(),e.hb(0,[[1,2]],null,0,null,Il))],null,null)}var wl=e.qb({encapsulation:2,styles:[],data:{}});function Ml(l){return e.Nb(2,[e.Cb(null,0),(l()(),e.sb(1,0,null,null,1,"div",[["class","mat-menu-ripple mat-ripple"],["matRipple",""]],[[2,"mat-ripple-unbounded",null]],null,null,null,null)),e.rb(2,212992,null,0,m.u,[e.k,e.y,g.a,[2,m.k],[2,v.a]],{disabled:[0,"disabled"],trigger:[1,"trigger"]},null)],function(l,n){var t=n.component;l(n,2,0,t.disableRipple||t.disabled,t._getHostElement())},function(l,n){l(n,1,0,e.Db(n,2).unbounded)})}var Sl=t("s7LF"),Ol=t("LRne"),Ll=t("5+tZ"),$l=t("IzEk");class Bl{constructor(l,n,t,e,a,i,r){this.chatService=l,this.dialogRef=n,this.errorService=t,this.fb=e,this.fileService=a,this.snackBar=i,this.userService=r,this.subscriptions=[]}ngOnInit(){this.users$=this.userService.users$,this.createForm(),this.listenMembersList()}listenMembersList(){this.subscriptions.push(this.members.valueChanges.subscribe(()=>{this.users$=this.users$.pipe(Object(_.a)(l=>l.filter(l=>this.members.controls.every(n=>n.value.id!==l.id))))}))}createForm(){this.newGroupForm=this.fb.group({title:this.fb.control("",[Sl.w.required,Sl.w.minLength(3)]),members:this.fb.array([],[Sl.w.required])})}get title(){return this.newGroupForm.get("title")}get members(){return this.newGroupForm.get("members")}addMember(l){this.members.push(this.fb.group(l))}removeMember(l){this.members.removeAt(l)}onSelectImage(l){this.selectedImage=l.target.files[0]}onSubmit(){let l,n=Object(Ol.a)(null);this.selectedImage&&(n=this.fileService.upload(this.selectedImage)),n.pipe(Object(Ll.a)(l=>{const n=Object.assign({title:this.title.value,usersIds:this.members.value.map(l=>l.id),photoId:l?l.id:null});return this.chatService.createGroup(n)}),Object($l.a)(1)).subscribe(n=>l=`'${n.title}' criado!`,n=>l=this.errorService.getErrorMessage(n),()=>{this.dialogRef.close(),this.snackBar.open(l,"OK",{duration:3e3})})}ngOnDestroy(){this.subscriptions.forEach(l=>l.unsubscribe())}}class Fl extends sl{constructor(l,n,t){super(),this.authService=l,this.chatService=n,this.dialog=t}ngOnInit(){this.chats$=this.chatService.chats$}getChatTitle(l){return l.title||l.users[0].name}getLastMessage(l){const n=l.messages[0];return n?`${n.sender.id===this.authService.authUser.id?"Voce":n.sender.name}: ${n.text}`:"Nenhuma mensagem."}onAddGroup(){this.dialog.open(Bl,{width:"400px",height:"80vh"})}}var Ul=t("s6ns"),Nl=e.qb({encapsulation:0,styles:[[".fab-bottom-right[_ngcontent-%COMP%]{position:fixed;bottom:15px;right:15px}"]],data:{}});function Al(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,16,"a",[["class","mat-list-item"],["mat-list-item",""]],[[2,"mat-list-item-avatar",null],[2,"mat-list-item-with-avatar",null],[1,"target",0],[8,"href",4]],[[null,"click"]],function(l,n,t){var a=!0;return"click"===n&&(a=!1!==e.Db(l,5).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&a),a},X.c,X.a)),e.rb(1,1228800,null,3,Y.d,[e.k,e.h,[2,Y.h],[2,Y.a]],null,null),e.Jb(603979776,1,{_lines:1}),e.Jb(603979776,2,{_avatar:0}),e.Jb(603979776,3,{_icon:0}),e.rb(5,671744,null,0,x.o,[x.l,x.a,c.i],{routerLink:[0,"routerLink"]},null),e.Eb(6,1),(l()(),e.sb(7,0,null,0,3,"app-avatar",[["class","mat-list-avatar"],["matListAvatar",""]],null,null,null,Z.b,Z.a)),e.rb(8,16384,[[2,4]],0,Y.b,[],null,null),e.rb(9,49152,null,0,ll.a,[],{src:[0,"src"],title:[1,"title"],containerStyles:[2,"containerStyles"]},null),e.Gb(10,{width:0,height:1,margin:2}),(l()(),e.sb(11,0,null,1,2,"h3",[["class","mat-line"],["matLine",""]],null,null,null,null,null)),e.rb(12,16384,[[1,4]],0,m.m,[],null,null),(l()(),e.Lb(13,null,["",""])),(l()(),e.sb(14,0,null,1,2,"p",[["class","mat-line"],["matLine",""]],null,null,null,null,null)),e.rb(15,16384,[[1,4]],0,m.m,[],null,null),(l()(),e.Lb(16,null,["",""]))],function(l,n){var t=n.component,e=l(n,6,0,n.context.$implicit.id);l(n,5,0,e);var a=n.context.$implicit.getPhotoURL(),i=t.getChatTitle(n.context.$implicit),r=l(n,10,0,"50px","50px",0);l(n,9,0,a,i,r)},function(l,n){var t=n.component;l(n,0,0,e.Db(n,1)._avatar||e.Db(n,1)._icon,e.Db(n,1)._avatar||e.Db(n,1)._icon,e.Db(n,5).target,e.Db(n,5).href),l(n,13,0,t.getChatTitle(n.context.$implicit)),l(n,16,0,t.getLastMessage(n.context.$implicit))})}function Pl(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,Al)),e.rb(2,278528,null,0,c.k,[e.O,e.L,e.r],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(l()(),e.hb(0,null,null,0))],function(l,n){l(n,2,0,n.parent.context.ngIf,n.component.trackByFn)},null)}function ql(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,Pl)),e.rb(2,16384,null,0,c.l,[e.O,e.L],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(l()(),e.hb(0,null,null,0))],function(l,n){l(n,2,0,n.context.ngIf.length>0,e.Db(n.parent,6))},null)}function jl(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,1,"mat-spinner",[["class","spinner mat-spinner mat-progress-spinner"],["diameter","50"],["mode","indeterminate"],["role","progressbar"],["strokeWidth","5"]],[[2,"_mat-animation-noopable",null],[4,"width","px"],[4,"height","px"]],null,null,nl.b,nl.a)),e.rb(1,114688,null,0,tl.d,[e.k,g.a,[2,c.d],[2,v.a],tl.a],{diameter:[0,"diameter"],strokeWidth:[1,"strokeWidth"]},null)],function(l,n){l(n,1,0,"50","5")},function(l,n){l(n,0,0,e.Db(n,1)._noopAnimations,e.Db(n,1).diameter,e.Db(n,1).diameter)})}function Tl(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,1,"app-no-record",[["icon","chat_bubble"],["title","Nenhuma conversa."]],null,null,null,ul,rl)),e.rb(1,49152,null,0,il,[],{icon:[0,"icon"],title:[1,"title"]},null)],function(l,n){l(n,1,0,"chat_bubble","Nenhuma conversa.")},null)}function Jl(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,4,"mat-nav-list",[["class","mat-nav-list mat-list-base"],["role","navigation"]],null,null,null,X.d,X.b)),e.rb(1,704512,null,0,Y.h,[],null,null),(l()(),e.hb(16777216,null,0,2,null,ql)),e.rb(3,16384,null,0,c.l,[e.O,e.L],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),e.Fb(131072,c.b,[e.h]),(l()(),e.hb(0,[["loadingChats",2]],null,0,null,jl)),(l()(),e.hb(0,[["noChats",2]],null,0,null,Tl)),(l()(),e.sb(7,16777216,null,null,5,"button",[["aria-haspopup","true"],["class","fab-bottom-right mat-menu-trigger"],["mat-fab",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null],[1,"aria-expanded",0]],[[null,"mousedown"],[null,"keydown"],[null,"click"]],function(l,n,t){var a=!0;return"mousedown"===n&&(a=!1!==e.Db(l,9)._handleMousedown(t)&&a),"keydown"===n&&(a=!1!==e.Db(l,9)._handleKeydown(t)&&a),"click"===n&&(a=!1!==e.Db(l,9)._handleClick(t)&&a),a},Dl.b,Dl.a)),e.rb(8,180224,null,0,yl.b,[e.k,f.d,[2,v.a]],null,null),e.rb(9,1196032,null,0,kl.g,[xl.a,e.k,e.O,kl.c,[2,kl.d],[8,null],[2,d.b],f.d],{menu:[0,"menu"]},null),(l()(),e.sb(10,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,el.b,el.a)),e.rb(11,9158656,null,0,al.b,[e.k,al.d,[8,null],[2,al.a],[2,e.l]],null,null),(l()(),e.Lb(-1,0,["add"])),(l()(),e.sb(13,0,null,null,13,"mat-menu",[],null,null,null,_l,Cl)),e.rb(14,1294336,[["chatListOptions",4]],3,kl.h,[e.k,e.y,kl.a],{overlapTrigger:[0,"overlapTrigger"]},null),e.Jb(603979776,4,{_allItems:1}),e.Jb(603979776,5,{items:1}),e.Jb(603979776,6,{lazyContent:0}),e.Ib(2048,null,kl.d,null,[kl.h]),e.Ib(2048,null,kl.b,null,[kl.d]),(l()(),e.sb(20,0,null,0,6,"button",[["class","mat-menu-item"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],function(l,n,t){var a=!0,i=l.component;return"click"===n&&(a=!1!==e.Db(l,21)._checkDisabled(t)&&a),"mouseenter"===n&&(a=!1!==e.Db(l,21)._handleMouseEnter()&&a),"click"===n&&(a=!1!==i.onAddGroup()&&a),a},Ml,wl)),e.rb(21,180224,[[4,4],[5,4]],0,kl.e,[e.k,c.d,f.d,[2,kl.b]],null,null),(l()(),e.sb(22,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,el.b,el.a)),e.rb(23,9158656,null,0,al.b,[e.k,al.d,[8,null],[2,al.a],[2,e.l]],null,null),(l()(),e.Lb(-1,0,["group_add"])),(l()(),e.sb(25,0,null,0,1,"span",[],null,null,null,null,null)),(l()(),e.Lb(-1,null,["Novo grupo"]))],function(l,n){var t=n.component;l(n,3,0,e.Mb(n,3,0,e.Db(n,4).transform(t.chats$)),e.Db(n,5)),l(n,9,0,e.Db(n,14)),l(n,11,0),l(n,14,0,!1),l(n,23,0)},function(l,n){l(n,7,0,e.Db(n,8).disabled||null,"NoopAnimations"===e.Db(n,8)._animationMode,e.Db(n,9).menuOpen||null),l(n,10,0,e.Db(n,11).inline,"primary"!==e.Db(n,11).color&&"accent"!==e.Db(n,11).color&&"warn"!==e.Db(n,11).color),l(n,20,0,e.Db(n,21).role,e.Db(n,21)._highlighted,e.Db(n,21)._triggersSubmenu,e.Db(n,21)._getTabIndex(),e.Db(n,21).disabled.toString(),e.Db(n,21).disabled||null),l(n,22,0,e.Db(n,23).inline,"primary"!==e.Db(n,23).color&&"accent"!==e.Db(n,23).color&&"warn"!==e.Db(n,23).color)})}function Rl(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,1,"app-chat-list",[],null,null,null,Jl,Nl)),e.rb(1,114688,null,0,Fl,[I.a,z,Ul.e],null,null)],function(l,n){l(n,1,0)},null)}var El=e.ob("app-chat-list",Fl,Rl,{},{},[]);class Ql{constructor(l){this.appConfig=l}transform(l){return function(l,n){const t=(new Date).getTime()+n,e=new Date(l).getTime();return function(l,n){const a=t-e;return a<2e4?"Agora mesmo":a<6e4?"menos de 1 minuto atr\xe1s":a<36e5?Math.round(a/6e4)+" minutos atr\xe1s":a<864e5?Math.round(a/36e5)+" h atr\xe1s":a<2592e6?Math.round(a/864e5)+" dias atr\xe1s":a<31536e6?Math.round(a/2592e6)+" meses atr\xe1s":Math.round(a/31536e6)+" anos atr\xe1s"}()}(l,this.appConfig.timeDifference)}}var Gl=t("u93f");class zl{constructor(){this.arrowClass={}}ngOnInit(){this.arrowClass={"arrow-left":!this.isFromSender,"arrow-right":this.isFromSender}}}var Kl=e.qb({encapsulation:0,styles:[[".message-container[_ngcontent-%COMP%]{margin:20px 12px;display:flex;flex-flow:row wrap}.text-container[_ngcontent-%COMP%]{flex:1 0 80%;position:relative;margin-left:20px;display:flex;flex-direction:column;align-items:flex-start}.text-container[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{background-color:#eee;color:#555;box-shadow:1px 1px 2px #ccc;padding:3px 15px}.text-container[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{color:#ccc;text-align:right}.arrow[_ngcontent-%COMP%]{width:0;height:0;border-style:solid;border-width:0 10px 10px 0;display:inline-block;position:absolute}.arrow-right[_ngcontent-%COMP%]{border-color:transparent #5c6bc0 transparent transparent;transform:rotate(-90deg);right:-10px}.arrow-left[_ngcontent-%COMP%]{border-color:transparent #eee transparent transparent;transform:rotate(0);left:-10px}.sender-container[_ngcontent-%COMP%]{align-items:flex-end;margin-left:0;margin-right:20px}.sender-container[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{background-color:#5c6bc0;box-shadow:-1px 1px 2px #ccc;color:#fff}"]],data:{}});function Wl(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,16,"div",[["class","message-container"]],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,2,"app-avatar",[],[[4,"order",null]],null,null,Z.b,Z.a)),e.rb(2,49152,null,0,ll.a,[],{src:[0,"src"],title:[1,"title"],containerStyles:[2,"containerStyles"]},null),e.Gb(3,{width:0,height:1,margin:2}),(l()(),e.sb(4,0,null,null,12,"div",[["class","text-container"]],null,null,null,null,null)),e.Ib(512,null,c.w,c.x,[e.r,e.s,e.k,e.D]),e.rb(6,278528,null,0,c.j,[c.w],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),e.Gb(7,{"sender-container":0}),(l()(),e.sb(8,0,null,null,2,"i",[["class","arrow"]],null,null,null,null,null)),e.Ib(512,null,c.w,c.x,[e.r,e.s,e.k,e.D]),e.rb(10,278528,null,0,c.j,[c.w],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(l()(),e.sb(11,0,null,null,1,"span",[["class","text"]],null,null,null,null,null)),(l()(),e.Lb(12,null,["",""])),(l()(),e.sb(13,0,null,null,3,"span",[["class","time"]],null,null,null,null,null)),(l()(),e.sb(14,0,null,null,2,"small",[],null,null,null,null,null)),(l()(),e.Lb(15,null,["",": ",""])),e.Fb(0,Ql,[Gl.a])],function(l,n){var t=n.component,e=t.message.sender.getPhotoURL(),a=t.message.sender.name,i=l(n,3,0,"50px","50px",0);l(n,2,0,e,a,i);var r=l(n,7,0,t.isFromSender);l(n,6,0,"text-container",r),l(n,10,0,"arrow",t.arrowClass)},function(l,n){var t=n.component;l(n,1,0,t.isFromSender?1:0),l(n,12,0,t.message.text),l(n,15,0,t.message.sender.name,e.Mb(n,15,1,e.Db(n,16).transform(t.message.createdAt)))})}var Vl=t("FbN9"),Hl=t("BzsH"),Xl=t("vkgz");class Yl extends sl{constructor(l,n,t,e,a,i){super(),this.authService=l,this.chatService=n,this.messageService=t,this.route=e,this.title=a,this.userService=i,this.newMessage="",this.recipientId=null,this.alreadyLoadedMessages=!1,this.subscriptions=[]}ngOnInit(){this.chatService.startChatMonitoring(),this.userService.startUsersMonitoring(this.authService.authUser.id),this.title.setTitle("Loading..."),this.subscriptions.push(this.route.data.pipe(Object(_.a)(l=>this.chat=l.chat),Object(Ll.a)(()=>this.route.paramMap),Object(Xl.a)(l=>{this.chat?(this.title.setTitle(this.chat.title||this.chat.users[0].name),this.messages$=this.messageService.getChatMessages(this.chat.id),this.alreadyLoadedMessages=!0):(this.recipientId=l.get("id"),this.userService.getUserById(this.recipientId).pipe(Object($l.a)(1)).subscribe(l=>this.title.setTitle(l.name)),this.messages$=Object(Ol.a)([]))})).subscribe())}ngAfterViewInit(){this.subscriptions.push(this.messagesQueryList.changes.subscribe(()=>{this.scrollToBottom("smooth")}))}sendMessage(){this.newMessage=this.newMessage.trim(),this.newMessage&&(this.chat?(this.createMessage().pipe(Object($l.a)(1)).subscribe(),this.newMessage=""):this.createPrivateChat())}createMessage(){return this.messageService.createMessage({text:this.newMessage,chatId:this.chat.id,senderId:this.authService.authUser.id}).pipe(Object(Xl.a)(l=>{this.alreadyLoadedMessages||(this.messages$=this.messageService.getChatMessages(this.chat.id),this.alreadyLoadedMessages=!0)}))}createPrivateChat(){this.chatService.createPrivateChat(this.recipientId).pipe(Object($l.a)(1),Object(Xl.a)(l=>{this.chat=l,this.sendMessage()})).subscribe()}scrollToBottom(l="auto",n="end"){setTimeout(()=>{this.content.nativeElement.scrollIntoView({behavior:l,block:n})},0)}ngOnDestroy(){this.subscriptions.forEach(l=>l.unsubscribe()),this.title.setTitle("Angular Graphcool Chat")}}let Zl=(()=>{class l extends w{constructor(l,n){super(),this.apollo=l,this.authService=n}getChatMessages(l){return this.apollo.watchQuery({query:q,variables:{chatId:l},fetchPolicy:"network-only"}).valueChanges.pipe(Object(_.a)(l=>l.data.allMessages),Object(_.a)(l=>l.map(l=>{const n=Object.assign({},l);return n.sender=new E.a(n.sender),n})))}createMessage(l){return this.apollo.mutate({mutation:j,variables:l,optimisticResponse:{__typename:"Mutation",createMessage:{__typename:"Message",id:"",text:l.text,createdAt:(new Date).toISOString(),sender:{__typename:"User",id:l.senderId,name:"",email:"",createdAt:"",photo:{__typename:"File",id:"",secret:this.authService.authUser.photo&&this.authService.authUser.photo.secret||""}},chat:{__typename:"Chat",id:l.chatId}}},update:(n,{data:{createMessage:t}})=>{this.readAndWriteQuery({store:n,newRecord:t,query:q,queryName:"allMessages",arrayOperation:"push",variable:{chatId:l.chatId}});try{const l={loggedUserId:this.authService.authUser.id},a=n.readQuery({query:B,variables:l}),i=[...a.allChats];i.map(l=>(l.id===t.chat.id&&(l.messages=[t]),l)),a.allChats=i,n.writeQuery({query:B,variables:l,data:a})}catch(e){console.log("Query allChats not found in cache!")}}}).pipe(Object(_.a)(l=>l.data.createMessage))}}return l.ngInjectableDef=e.Rb({factory:function(){return new l(e.Sb(Q.b),e.Sb(I.a))},token:l,providedIn:"root"}),l})();var ln=e.qb({encapsulation:0,styles:[[".content[_ngcontent-%COMP%]{position:relative;padding-bottom:55px;margin-bottom:-50px}.input[_ngcontent-%COMP%]{flex:1 1 90%;height:21px;border:none;padding:3px 10px;font-size:18px;color:#555;background-color:#efefef;outline:0;resize:none}"]],data:{}});function nn(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,1,"app-chat-message",[],null,null,null,Wl,Kl)),e.rb(1,114688,[[2,4]],0,zl,[],{message:[0,"message"],isFromSender:[1,"isFromSender"]},null)],function(l,n){l(n,1,0,n.context.$implicit,n.context.$implicit.sender.id===n.component.authService.authUser.id)},null)}function tn(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,nn)),e.rb(2,278528,null,0,c.k,[e.O,e.L,e.r],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(l()(),e.hb(0,null,null,0))],function(l,n){l(n,2,0,n.parent.context.ngIf,n.component.trackByFn)},null)}function en(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,tn)),e.rb(2,16384,null,0,c.l,[e.O,e.L],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(l()(),e.hb(0,null,null,0))],function(l,n){l(n,2,0,n.context.ngIf.length>0,e.Db(n.parent,7))},null)}function an(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,1,"mat-spinner",[["class","spinner mat-spinner mat-progress-spinner"],["diameter","50"],["mode","indeterminate"],["role","progressbar"],["strokeWidth","3"]],[[2,"_mat-animation-noopable",null],[4,"width","px"],[4,"height","px"]],null,null,nl.b,nl.a)),e.rb(1,114688,null,0,tl.d,[e.k,g.a,[2,c.d],[2,v.a],tl.a],{diameter:[0,"diameter"],strokeWidth:[1,"strokeWidth"]},null)],function(l,n){l(n,1,0,"50","3")},function(l,n){l(n,0,0,e.Db(n,1)._noopAnimations,e.Db(n,1).diameter,e.Db(n,1).diameter)})}function rn(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,1,"app-no-record",[["icon","message"],["title","No messages."]],null,null,null,ul,rl)),e.rb(1,49152,null,0,il,[],{icon:[0,"icon"],title:[1,"title"]},null)],function(l,n){l(n,1,0,"message","No messages.")},null)}function un(l){return e.Nb(0,[e.Jb(671088640,1,{content:0}),e.Jb(671088640,2,{messagesQueryList:1}),(l()(),e.sb(2,0,[[1,0],["content",1]],null,5,"section",[["class","content"]],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,2,null,en)),e.rb(4,16384,null,0,c.l,[e.O,e.L],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),e.Fb(131072,c.b,[e.h]),(l()(),e.hb(0,[["loadingMessages",2]],null,0,null,an)),(l()(),e.hb(0,[["noMessages",2]],null,0,null,rn)),(l()(),e.sb(8,0,null,null,16,"mat-toolbar",[["class","fixed-bottom mat-toolbar"],["color","primary"]],[[2,"mat-toolbar-multiple-rows",null],[2,"mat-toolbar-single-row",null]],null,null,Vl.b,Vl.a)),e.rb(9,4243456,null,1,Hl.a,[e.k,g.a,c.d],{color:[0,"color"]},null),e.Jb(603979776,3,{_toolbarRows:1}),(l()(),e.sb(11,0,null,1,13,"mat-toolbar-row",[["class","mat-toolbar-row"]],null,null,null,null,null)),e.rb(12,16384,[[3,4]],0,Hl.c,[],null,null),(l()(),e.sb(13,0,null,null,5,"input",[["class","input"],["placeholder","Type a message"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keyup.enter"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,t){var a=!0,i=l.component;return"input"===n&&(a=!1!==e.Db(l,14)._handleInput(t.target.value)&&a),"blur"===n&&(a=!1!==e.Db(l,14).onTouched()&&a),"compositionstart"===n&&(a=!1!==e.Db(l,14)._compositionStart()&&a),"compositionend"===n&&(a=!1!==e.Db(l,14)._compositionEnd(t.target.value)&&a),"ngModelChange"===n&&(a=!1!==(i.newMessage=t)&&a),"keyup.enter"===n&&(a=!1!==i.sendMessage()&&a),a},null,null)),e.rb(14,16384,null,0,Sl.d,[e.D,e.k,[2,Sl.a]],null,null),e.Ib(1024,null,Sl.o,function(l){return[l]},[Sl.d]),e.rb(16,671744,null,0,Sl.t,[[8,null],[8,null],[8,null],[6,Sl.o]],{model:[0,"model"]},{update:"ngModelChange"}),e.Ib(2048,null,Sl.p,null,[Sl.t]),e.rb(18,16384,null,0,Sl.q,[[4,Sl.p]],null,null),(l()(),e.sb(19,0,null,null,0,"span",[["class","spacer"]],null,null,null,null,null)),(l()(),e.sb(20,0,null,null,4,"button",[["mat-icon-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.sendMessage()&&e),e},Dl.b,Dl.a)),e.rb(21,180224,null,0,yl.b,[e.k,f.d,[2,v.a]],null,null),(l()(),e.sb(22,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,el.b,el.a)),e.rb(23,9158656,null,0,al.b,[e.k,al.d,[8,null],[2,al.a],[2,e.l]],null,null),(l()(),e.Lb(-1,0,["send"]))],function(l,n){var t=n.component;l(n,4,0,e.Mb(n,4,0,e.Db(n,5).transform(t.messages$)),e.Db(n,6)),l(n,9,0,"primary"),l(n,16,0,t.newMessage),l(n,23,0)},function(l,n){l(n,8,0,e.Db(n,9)._toolbarRows.length>0,0===e.Db(n,9)._toolbarRows.length),l(n,13,0,e.Db(n,18).ngClassUntouched,e.Db(n,18).ngClassTouched,e.Db(n,18).ngClassPristine,e.Db(n,18).ngClassDirty,e.Db(n,18).ngClassValid,e.Db(n,18).ngClassInvalid,e.Db(n,18).ngClassPending),l(n,20,0,e.Db(n,21).disabled||null,"NoopAnimations"===e.Db(n,21)._animationMode),l(n,22,0,e.Db(n,23).inline,"primary"!==e.Db(n,23).color&&"accent"!==e.Db(n,23).color&&"warn"!==e.Db(n,23).color)})}function sn(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,1,"app-chat-window",[],null,null,null,un,ln)),e.rb(1,4440064,null,0,Yl,[I.a,z,Zl,x.a,h.h,G.a],null,null)],function(l,n){l(n,1,0)},null)}var on=e.ob("app-chat-window",Yl,sn,{},{},[]),cn=t("HsOI"),bn=t("TtEo"),dn=t("02hT"),mn=t("sIgD"),hn=t("dJrM"),pn=t("ZwOa"),gn=t("oapL"),fn=t("qXXK"),vn=t("sINK"),Dn=t("dFDH"),yn=e.qb({encapsulation:0,styles:[[".group-cover[_ngcontent-%COMP%]{position:relative}.group-cover[_ngcontent-%COMP%]   .btn-choose-photo[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;background-color:#fff}"]],data:{}});function kn(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,2,"mat-error",[["class","mat-error"],["role","alert"]],[[1,"id",0]],null,null,null,null)),e.rb(1,16384,[[6,4]],0,cn.b,[],null,null),(l()(),e.Lb(-1,null,[" Este campo \xe9 obrigat\xf3rio "]))],null,function(l,n){l(n,0,0,e.Db(n,1).id)})}function xn(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,2,"mat-error",[["class","mat-error"],["role","alert"]],[[1,"id",0]],null,null,null,null)),e.rb(1,16384,[[6,4]],0,cn.b,[],null,null),(l()(),e.Lb(-1,null,[" Entre com pelo menos 3 caracteres "]))],null,function(l,n){l(n,0,0,e.Db(n,1).id)})}function Cn(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,15,"mat-list-item",[["class","mat-list-item"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"mat-list-item-avatar",null],[2,"mat-list-item-with-avatar",null]],null,null,X.c,X.a)),e.rb(1,212992,null,0,Sl.k,[[3,Sl.c],[8,null],[8,null]],{name:[0,"name"]},null),e.Ib(2048,null,Sl.c,null,[Sl.k]),e.rb(3,16384,null,0,Sl.r,[[4,Sl.c]],null,null),e.rb(4,1228800,null,3,Y.d,[e.k,e.h,[2,Y.h],[2,Y.a]],null,null),e.Jb(603979776,10,{_lines:1}),e.Jb(603979776,11,{_avatar:0}),e.Jb(603979776,12,{_icon:0}),(l()(),e.sb(8,0,null,1,2,"h3",[["class","mat-line"],["matLine",""]],null,null,null,null,null)),e.rb(9,16384,[[10,4]],0,m.m,[],null,null),(l()(),e.Lb(10,null,["",""])),(l()(),e.sb(11,0,null,2,4,"button",[["mat-icon-button",""],["type","button"]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.removeMember(l.context.index)&&e),e},Dl.b,Dl.a)),e.rb(12,180224,null,0,yl.b,[e.k,f.d,[2,v.a]],null,null),(l()(),e.sb(13,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,el.b,el.a)),e.rb(14,9158656,null,0,al.b,[e.k,al.d,[8,null],[2,al.a],[2,e.l]],null,null),(l()(),e.Lb(-1,0,["close"]))],function(l,n){l(n,1,0,n.context.index),l(n,14,0)},function(l,n){l(n,0,0,e.Db(n,3).ngClassUntouched,e.Db(n,3).ngClassTouched,e.Db(n,3).ngClassPristine,e.Db(n,3).ngClassDirty,e.Db(n,3).ngClassValid,e.Db(n,3).ngClassInvalid,e.Db(n,3).ngClassPending,e.Db(n,4)._avatar||e.Db(n,4)._icon,e.Db(n,4)._avatar||e.Db(n,4)._icon),l(n,10,0,n.context.$implicit.value.name),l(n,11,0,e.Db(n,12).disabled||null,"NoopAnimations"===e.Db(n,12)._animationMode),l(n,13,0,e.Db(n,14).inline,"primary"!==e.Db(n,14).color&&"accent"!==e.Db(n,14).color&&"warn"!==e.Db(n,14).color)})}function In(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,11,"mat-nav-list",[["class","mat-nav-list mat-list-base"],["formArrayName","members"],["role","navigation"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,X.d,X.b)),e.rb(1,212992,null,0,Sl.f,[[3,Sl.c],[8,null],[8,null]],{name:[0,"name"]},null),e.Ib(2048,null,Sl.c,null,[Sl.f]),e.rb(3,16384,null,0,Sl.r,[[4,Sl.c]],null,null),e.rb(4,704512,null,0,Y.h,[],null,null),(l()(),e.sb(5,0,null,0,2,"h3",[["class","mat-subheader"],["matSubheader",""]],null,null,null,null,null)),e.rb(6,16384,null,0,Y.g,[],null,null),(l()(),e.Lb(-1,null,["Usu\xe1rios selecionados:"])),(l()(),e.hb(16777216,null,0,1,null,Cn)),e.rb(9,278528,null,0,c.k,[e.O,e.L,e.r],{ngForOf:[0,"ngForOf"]},null),(l()(),e.sb(10,0,null,0,1,"mat-divider",[["class","mat-divider"],["role","separator"]],[[1,"aria-orientation",0],[2,"mat-divider-vertical",null],[2,"mat-divider-horizontal",null],[2,"mat-divider-inset",null]],null,null,bn.b,bn.a)),e.rb(11,49152,null,0,dn.a,[],null,null)],function(l,n){var t=n.component;l(n,1,0,"members"),l(n,9,0,t.members.controls)},function(l,n){l(n,0,0,e.Db(n,3).ngClassUntouched,e.Db(n,3).ngClassTouched,e.Db(n,3).ngClassPristine,e.Db(n,3).ngClassDirty,e.Db(n,3).ngClassValid,e.Db(n,3).ngClassInvalid,e.Db(n,3).ngClassPending),l(n,10,0,e.Db(n,11).vertical?"vertical":"horizontal",e.Db(n,11).vertical,!e.Db(n,11).vertical,e.Db(n,11).inset)})}function _n(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,12,"mat-list-item",[["class","mat-list-item"]],[[2,"mat-list-item-avatar",null],[2,"mat-list-item-with-avatar",null]],null,null,X.c,X.a)),e.rb(1,1228800,null,3,Y.d,[e.k,e.h,[2,Y.h],[2,Y.a]],null,null),e.Jb(603979776,13,{_lines:1}),e.Jb(603979776,14,{_avatar:0}),e.Jb(603979776,15,{_icon:0}),(l()(),e.sb(5,0,null,1,2,"h3",[["class","mat-line"],["matLine",""]],null,null,null,null,null)),e.rb(6,16384,[[13,4]],0,m.m,[],null,null),(l()(),e.Lb(7,null,["",""])),(l()(),e.sb(8,0,null,2,4,"button",[["mat-icon-button",""],["type","button"]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.addMember(l.context.$implicit)&&e),e},Dl.b,Dl.a)),e.rb(9,180224,null,0,yl.b,[e.k,f.d,[2,v.a]],null,null),(l()(),e.sb(10,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,el.b,el.a)),e.rb(11,9158656,null,0,al.b,[e.k,al.d,[8,null],[2,al.a],[2,e.l]],null,null),(l()(),e.Lb(-1,0,["add"]))],function(l,n){l(n,11,0)},function(l,n){l(n,0,0,e.Db(n,1)._avatar||e.Db(n,1)._icon,e.Db(n,1)._avatar||e.Db(n,1)._icon),l(n,7,0,n.context.$implicit.name),l(n,8,0,e.Db(n,9).disabled||null,"NoopAnimations"===e.Db(n,9)._animationMode),l(n,10,0,e.Db(n,11).inline,"primary"!==e.Db(n,11).color&&"accent"!==e.Db(n,11).color&&"warn"!==e.Db(n,11).color)})}function wn(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,5,null,null,null,null,null,null,null)),(l()(),e.sb(1,0,null,null,2,"h3",[["class","mat-subheader"],["matSubheader",""]],null,null,null,null,null)),e.rb(2,16384,null,0,Y.g,[],null,null),(l()(),e.Lb(-1,null,["Adicionar usu\xe1rios:"])),(l()(),e.hb(16777216,null,null,1,null,_n)),e.rb(5,278528,null,0,c.k,[e.O,e.L,e.r],{ngForOf:[0,"ngForOf"]},null),(l()(),e.hb(0,null,null,0))],function(l,n){l(n,5,0,n.parent.context.ngIf)},null)}function Mn(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),e.Lb(-1,null,["Nenhum usu\xe1rio cadastrado."]))],null,null)}function Sn(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,4,"mat-nav-list",[["class","mat-nav-list mat-list-base"],["role","navigation"]],null,null,null,X.d,X.b)),e.rb(1,704512,null,0,Y.h,[],null,null),(l()(),e.hb(16777216,null,0,1,null,wn)),e.rb(3,16384,null,0,c.l,[e.O,e.L],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(l()(),e.hb(0,[["noUsersTemplate",2]],0,0,null,Mn))],function(l,n){l(n,3,0,n.context.ngIf.length>0,e.Db(n,4))},null)}function On(l){return e.Nb(0,[e.Fb(0,mn.a,[]),(l()(),e.sb(1,0,null,null,2,"h2",[["class","mat-dialog-title"],["mat-dialog-title",""]],[[8,"id",0]],null,null,null,null)),e.rb(2,81920,null,0,Ul.m,[[2,Ul.l],e.k,Ul.e],null,null),(l()(),e.Lb(-1,null,["New Group"])),(l()(),e.sb(4,0,[["inputFile",1]],null,0,"input",[["accept","image/*"],["type","file"]],[[8,"hidden",0]],[[null,"change"]],function(l,n,t){var e=!0;return"change"===n&&(e=!1!==l.component.onSelectImage(t)&&e),e},null,null)),(l()(),e.sb(5,0,null,null,9,"div",[["class","group-cover"]],null,null,null,null,null)),(l()(),e.sb(6,0,null,null,8,"app-avatar",[["title","Group cover"]],null,null,null,Z.b,Z.a)),e.rb(7,49152,null,0,ll.a,[],{src:[0,"src"],title:[1,"title"]},null),e.Hb(8,1),e.Fb(131072,c.b,[e.h]),(l()(),e.sb(10,0,null,0,4,"button",[["class","btn-choose-photo"],["color","primary"],["mat-icon-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(l,n,t){var a=!0;return"click"===n&&(a=!1!==e.Db(l,4).click()&&a),a},Dl.b,Dl.a)),e.rb(11,180224,null,0,yl.b,[e.k,f.d,[2,v.a]],{color:[0,"color"]},null),(l()(),e.sb(12,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,el.b,el.a)),e.rb(13,9158656,null,0,al.b,[e.k,al.d,[8,null],[2,al.a],[2,e.l]],null,null),(l()(),e.Lb(-1,0,["camera_alt"])),(l()(),e.sb(15,0,null,null,43,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(l,n,t){var a=!0,i=l.component;return"submit"===n&&(a=!1!==e.Db(l,17).onSubmit(t)&&a),"reset"===n&&(a=!1!==e.Db(l,17).onReset()&&a),"submit"===n&&(a=!1!==i.onSubmit()&&a),a},null,null)),e.rb(16,16384,null,0,Sl.A,[],null,null),e.rb(17,540672,null,0,Sl.j,[[8,null],[8,null]],{form:[0,"form"]},null),e.Ib(2048,null,Sl.c,null,[Sl.j]),e.rb(19,16384,null,0,Sl.r,[[4,Sl.c]],null,null),(l()(),e.sb(20,0,null,null,29,"mat-dialog-content",[["class","mat-dialog-content"]],null,null,null,null,null)),e.rb(21,16384,null,0,Ul.j,[],null,null),(l()(),e.sb(22,0,null,null,22,"mat-form-field",[["class","mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,hn.b,hn.a)),e.rb(23,7520256,null,9,cn.c,[e.k,e.h,[2,m.h],[2,d.b],[2,cn.a],g.a,e.y,[2,v.a]],null,null),e.Jb(603979776,1,{_controlNonStatic:0}),e.Jb(335544320,2,{_controlStatic:0}),e.Jb(603979776,3,{_labelChildNonStatic:0}),e.Jb(335544320,4,{_labelChildStatic:0}),e.Jb(603979776,5,{_placeholderChild:0}),e.Jb(603979776,6,{_errorChildren:1}),e.Jb(603979776,7,{_hintChildren:1}),e.Jb(603979776,8,{_prefixChildren:1}),e.Jb(603979776,9,{_suffixChildren:1}),(l()(),e.sb(33,0,null,1,7,"input",[["class","mat-input-element mat-form-field-autofill-control"],["formControlName","title"],["matInput",""],["placeholder","T\xedtulo do grupo"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[1,"readonly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"focus"]],function(l,n,t){var a=!0;return"input"===n&&(a=!1!==e.Db(l,34)._handleInput(t.target.value)&&a),"blur"===n&&(a=!1!==e.Db(l,34).onTouched()&&a),"compositionstart"===n&&(a=!1!==e.Db(l,34)._compositionStart()&&a),"compositionend"===n&&(a=!1!==e.Db(l,34)._compositionEnd(t.target.value)&&a),"blur"===n&&(a=!1!==e.Db(l,39)._focusChanged(!1)&&a),"focus"===n&&(a=!1!==e.Db(l,39)._focusChanged(!0)&&a),"input"===n&&(a=!1!==e.Db(l,39)._onInput()&&a),a},null,null)),e.rb(34,16384,null,0,Sl.d,[e.D,e.k,[2,Sl.a]],null,null),e.Ib(1024,null,Sl.o,function(l){return[l]},[Sl.d]),e.rb(36,671744,null,0,Sl.i,[[3,Sl.c],[8,null],[8,null],[6,Sl.o],[2,Sl.z]],{name:[0,"name"]},null),e.Ib(2048,null,Sl.p,null,[Sl.i]),e.rb(38,16384,null,0,Sl.q,[[4,Sl.p]],null,null),e.rb(39,999424,null,0,pn.a,[e.k,g.a,[6,Sl.p],[2,Sl.s],[2,Sl.j],m.b,[8,null],gn.a,e.y],{placeholder:[0,"placeholder"],type:[1,"type"]},null),e.Ib(2048,[[1,4],[2,4]],cn.d,null,[pn.a]),(l()(),e.hb(16777216,null,5,1,null,kn)),e.rb(42,16384,null,0,c.l,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,5,1,null,xn)),e.rb(44,16384,null,0,c.l,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,In)),e.rb(46,16384,null,0,c.l,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,2,null,Sn)),e.rb(48,16384,null,0,c.l,[e.O,e.L],{ngIf:[0,"ngIf"]},null),e.Fb(131072,c.b,[e.h]),(l()(),e.sb(50,0,null,null,8,"mat-dialog-actions",[["class","mat-dialog-actions"]],null,null,null,null,null)),e.rb(51,16384,null,0,Ul.f,[],null,null),(l()(),e.sb(52,0,null,null,3,"button",[["mat-button",""],["mat-dialog-close",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null],[1,"aria-label",0],[1,"type",0]],[[null,"click"]],function(l,n,t){var a=!0;return"click"===n&&(a=!1!==e.Db(l,54).dialogRef.close(e.Db(l,54).dialogResult)&&a),a},Dl.b,Dl.a)),e.rb(53,180224,null,0,yl.b,[e.k,f.d,[2,v.a]],null,null),e.rb(54,606208,null,0,Ul.g,[[2,Ul.l],e.k,Ul.e],{dialogResult:[0,"dialogResult"]},null),(l()(),e.Lb(-1,0,["Cancelar"])),(l()(),e.sb(56,0,null,null,2,"button",[["mat-button",""],["type","submit"]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],null,null,Dl.b,Dl.a)),e.rb(57,180224,null,0,yl.b,[e.k,f.d,[2,v.a]],{disabled:[0,"disabled"]},null),(l()(),e.Lb(-1,0,["Criar"]))],function(l,n){var t=n.component;l(n,2,0);var a=e.Mb(n,7,0,e.Db(n,9).transform(e.Mb(n,7,0,l(n,8,0,e.Db(n,0),t.selectedImage))))||"assets/images/group-no-photo.png";l(n,7,0,a,"Group cover"),l(n,11,0,"primary"),l(n,13,0),l(n,17,0,t.newGroupForm),l(n,36,0,"title"),l(n,39,0,"T\xedtulo do grupo","text"),l(n,42,0,t.title.touched&&t.title.hasError("required")),l(n,44,0,t.title.touched&&t.title.hasError("minlength")),l(n,46,0,t.members.controls.length>0),l(n,48,0,e.Mb(n,48,0,e.Db(n,49).transform(t.users$))),l(n,54,0,""),l(n,57,0,t.newGroupForm.invalid)},function(l,n){l(n,1,0,e.Db(n,2).id),l(n,4,0,!0),l(n,10,0,e.Db(n,11).disabled||null,"NoopAnimations"===e.Db(n,11)._animationMode),l(n,12,0,e.Db(n,13).inline,"primary"!==e.Db(n,13).color&&"accent"!==e.Db(n,13).color&&"warn"!==e.Db(n,13).color),l(n,15,0,e.Db(n,19).ngClassUntouched,e.Db(n,19).ngClassTouched,e.Db(n,19).ngClassPristine,e.Db(n,19).ngClassDirty,e.Db(n,19).ngClassValid,e.Db(n,19).ngClassInvalid,e.Db(n,19).ngClassPending),l(n,22,1,["standard"==e.Db(n,23).appearance,"fill"==e.Db(n,23).appearance,"outline"==e.Db(n,23).appearance,"legacy"==e.Db(n,23).appearance,e.Db(n,23)._control.errorState,e.Db(n,23)._canLabelFloat,e.Db(n,23)._shouldLabelFloat(),e.Db(n,23)._hasFloatingLabel(),e.Db(n,23)._hideControlPlaceholder(),e.Db(n,23)._control.disabled,e.Db(n,23)._control.autofilled,e.Db(n,23)._control.focused,"accent"==e.Db(n,23).color,"warn"==e.Db(n,23).color,e.Db(n,23)._shouldForward("untouched"),e.Db(n,23)._shouldForward("touched"),e.Db(n,23)._shouldForward("pristine"),e.Db(n,23)._shouldForward("dirty"),e.Db(n,23)._shouldForward("valid"),e.Db(n,23)._shouldForward("invalid"),e.Db(n,23)._shouldForward("pending"),!e.Db(n,23)._animationsEnabled]),l(n,33,1,[e.Db(n,38).ngClassUntouched,e.Db(n,38).ngClassTouched,e.Db(n,38).ngClassPristine,e.Db(n,38).ngClassDirty,e.Db(n,38).ngClassValid,e.Db(n,38).ngClassInvalid,e.Db(n,38).ngClassPending,e.Db(n,39)._isServer,e.Db(n,39).id,e.Db(n,39).placeholder,e.Db(n,39).disabled,e.Db(n,39).required,e.Db(n,39).readonly&&!e.Db(n,39)._isNativeSelect||null,e.Db(n,39)._ariaDescribedby||null,e.Db(n,39).errorState,e.Db(n,39).required.toString()]),l(n,52,0,e.Db(n,53).disabled||null,"NoopAnimations"===e.Db(n,53)._animationMode,e.Db(n,54).ariaLabel||null,e.Db(n,54).type),l(n,56,0,e.Db(n,57).disabled||null,"NoopAnimations"===e.Db(n,57)._animationMode)})}function Ln(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,1,"app-chat-add-group",[],null,null,null,On,yn)),e.rb(1,245760,null,0,Bl,[z,Ul.l,fn.a,Sl.g,vn.a,Dn.b,G.a],null,null)],function(l,n){l(n,1,0)},null)}var $n=e.ob("app-chat-add-group",Bl,Ln,{},{},[]);class Bn{constructor(l){this.chatService=l}resolve(l,n){const t=l.paramMap.get("id");return this.chatService.getChatByIdByUsers(t)}}var Fn=t("igqZ"),Un=t("BV1i"),Nn=t("pBi1"),An=t("PCNd"),Pn=t("VQQV");class qn{}t.d(n,"ChatModuleNgFactory",function(){return jn});var jn=e.pb(a,[],function(l){return e.Ab([e.Bb(512,e.j,e.ab,[[8,[i.a,r.a,r.b,u.a,s.a,H,vl,El,on,$n]],[3,e.j],e.w]),e.Bb(4608,c.n,c.m,[e.t,[2,c.B]]),e.Bb(4608,xl.a,xl.a,[xl.g,xl.c,e.j,xl.f,xl.d,e.q,e.y,c.d,d.b,[2,c.h]]),e.Bb(5120,xl.h,xl.i,[xl.a]),e.Bb(5120,Ul.c,Ul.d,[xl.a]),e.Bb(135680,Ul.e,Ul.e,[xl.a,e.q,[2,c.h],[2,Ul.b],Ul.c,[3,Ul.e],xl.c]),e.Bb(4608,Sl.y,Sl.y,[]),e.Bb(4608,b.c,b.c,[]),e.Bb(4608,m.b,m.b,[]),e.Bb(5120,kl.c,kl.j,[xl.a]),e.Bb(4608,h.e,m.c,[[2,m.g],[2,m.l]]),e.Bb(4608,Sl.g,Sl.g,[]),e.Bb(4608,Bn,Bn,[z]),e.Bb(1073742336,c.c,c.c,[]),e.Bb(1073742336,d.a,d.a,[]),e.Bb(1073742336,m.l,m.l,[[2,m.d],[2,h.f]]),e.Bb(1073742336,g.b,g.b,[]),e.Bb(1073742336,m.v,m.v,[]),e.Bb(1073742336,yl.c,yl.c,[]),e.Bb(1073742336,Fn.f,Fn.f,[]),e.Bb(1073742336,p.g,p.g,[]),e.Bb(1073742336,D.c,D.c,[]),e.Bb(1073742336,xl.e,xl.e,[]),e.Bb(1073742336,Ul.k,Ul.k,[]),e.Bb(1073742336,al.c,al.c,[]),e.Bb(1073742336,Hl.b,Hl.b,[]),e.Bb(1073742336,Sl.x,Sl.x,[]),e.Bb(1073742336,Sl.l,Sl.l,[]),e.Bb(1073742336,b.d,b.d,[]),e.Bb(1073742336,cn.e,cn.e,[]),e.Bb(1073742336,gn.c,gn.c,[]),e.Bb(1073742336,pn.b,pn.b,[]),e.Bb(1073742336,m.n,m.n,[]),e.Bb(1073742336,m.t,m.t,[]),e.Bb(1073742336,dn.b,dn.b,[]),e.Bb(1073742336,Y.e,Y.e,[]),e.Bb(1073742336,kl.i,kl.i,[]),e.Bb(1073742336,kl.f,kl.f,[]),e.Bb(1073742336,tl.c,tl.c,[]),e.Bb(1073742336,Un.h,Un.h,[]),e.Bb(1073742336,Dn.e,Dn.e,[]),e.Bb(1073742336,Nn.d,Nn.d,[]),e.Bb(1073742336,Nn.c,Nn.c,[]),e.Bb(1073742336,f.a,f.a,[]),e.Bb(1073742336,o.k,o.k,[]),e.Bb(1073742336,Sl.u,Sl.u,[]),e.Bb(1073742336,An.a,An.a,[]),e.Bb(1073742336,x.p,x.p,[[2,x.u],[2,x.l]]),e.Bb(1073742336,qn,qn,[]),e.Bb(1073742336,a,a,[]),e.Bb(1024,x.j,function(){return[[{path:"",component:C,canActivate:[Pn.a],canActivateChild:[Pn.a],children:[{path:"users",component:ol},{path:"",component:Fl}]},{path:":id",component:Yl,canActivate:[Pn.a],resolve:{chat:Bn}}]]},[])])})}}]);